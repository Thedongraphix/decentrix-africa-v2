---
import StarlightHead from "@astrojs/starlight/components/Head.astro";
import VtbotStarlight from "astro-vtbot/components/starlight/Base.astro";

interface HeadProps {
  lang?: string;
  dir?: "ltr" | "rtl";
  title?: string;
  description?: string;
}

const props = Astro.props as HeadProps;
---

<StarlightHead {...props}>
  <VtbotStarlight slot="head" />
  
  <script slot="head">
    import "@scripts/lenisSmoothScroll.js";
  </script>
  
  <slot />
</StarlightHead>

<style is:global>
  /* Slow down Chrome's default animation */
  ::view-transition-group(root) {
    animation-duration: 250ms;
  }

  /* Do not slide over the sidebars */
  ::view-transition-group(*) {
    overflow: hidden;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const siteSearch = document.querySelector(
      "site-search"
    ) as HTMLElement | null;
    if (siteSearch) {
      siteSearch.setAttribute("data-lenis-prevent", "");
    }
  });
</script>
